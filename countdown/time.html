<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <title>Time Display</title>
    <script src="../p5.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            overflow: hidden;
            background: #000;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Noto Sans", sans-serif;
            color: #fff;
            height: 100vh;
            width: 100vw;
        }

        #p5-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        #ui-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            pointer-events: none;
        }

        .time {
            font-size: 15vw;
            font-weight: bold;
            margin-bottom: 30px;
            text-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
        }

        .date {
            font-size: 4vw;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
        }
    </style>
</head>

<body>
    <div id="p5-container"></div>
    <div id="ui-overlay">
        <div class="time" id="time">00:00:00</div>
        <div class="date" id="date">0000/00/00</div>
    </div>

    <script>
        function updateTime() {
            const now = new Date();
            const h = String(now.getHours()).padStart(2, "0");
            const m = String(now.getMinutes()).padStart(2, "0");
            const s = String(now.getSeconds()).padStart(2, "0");

            const yyyy = now.getFullYear();
            const MM = String(now.getMonth() + 1).padStart(2, "0");
            const dd = String(now.getDate()).padStart(2, "0");
            
            // 曜日を英語短縮形で取得
            const dayNames = ["Sun.", "Mon.", "Tue.", "Wed.", "Thu.", "Fri.", "Sat."];
            const dayName = dayNames[now.getDay()];

            document.getElementById('time').textContent = `${h}:${m}:${s}`;
            document.getElementById('date').textContent = `${yyyy}/${MM}/${dd} ${dayName}`;
        }

        updateTime();
        setInterval(updateTime, 1000);

        // p5.js sketch for floating circle
        let sketch = (p) => {
            let circleX, circleY;
            let targetX, targetY;
            let circleSize;
            let targetSize;
            let time = 0;
            let baseSize; // 解像度に対する比率で定義

            p.setup = function() {
                let container = document.getElementById('p5-container');
                let w = container.clientWidth;
                let h = container.clientHeight;
                let canvas = p.createCanvas(w, h);
                canvas.parent('p5-container');

                baseSize = Math.min(w, h) * 0.3; // 短辺の30%を基本サイズに
                circleX = w / 2;
                circleY = h / 2;
                targetX = w / 2;
                targetY = h / 2;
                circleSize = baseSize;
                targetSize = baseSize;
            };

            p.draw = function() {
                p.background(0, 0, 0);
                time += 0.01;

                // Pick new target occasionally
                if (p.frameCount % 120 === 0) {
                    targetX = p.random(p.width * 0.2, p.width * 0.8);
                    targetY = p.random(p.height * 0.2, p.height * 0.8);
                    targetSize = p.random(baseSize * 0.75, baseSize * 1.75);
                }

                // Smooth movement toward target
                circleX += (targetX - circleX) * 0.05;
                circleY += (targetY - circleY) * 0.05;
                circleSize += (targetSize - circleSize) * 0.04;

                // Add gentle sway
                let swayX = p.sin(time * 0.5) * 30;
                let swayY = p.cos(time * 0.4) * 20;

                // Draw faint circle
                p.fill(255, 255, 255, 15);
                p.noStroke();
                p.ellipse(circleX + swayX, circleY + swayY, circleSize);

                // Subtle blur/glow effect with multiple faint circles
                p.fill(255, 255, 255, 5);
                for (let i = 1; i <= 3; i++) {
                    p.ellipse(
                        circleX + swayX,
                        circleY + swayY,
                        circleSize + i * 20
                    );
                }
            };

            p.windowResized = function() {
                if (document.getElementById('p5-container')) {
                    let container = document.getElementById('p5-container');
                    p.resizeCanvas(container.clientWidth, container.clientHeight);
                }
            };
        };

        new p5(sketch);
    </script>
    <!-- <script src="quotes.js"></script> -->
    <!-- <script src="time_sketch.js"></script> -->
</body>

</html>